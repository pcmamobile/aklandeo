<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PCMA Mobile V3.1</title>

  <link rel="icon" type="image/png" sizes="32x32" href="https://i.ibb.co/RRJpHk2/PCMA-logo-1.png">
  <link rel="apple-touch-icon" sizes="180x180" href="https://i.ibb.co/RRJpHk2/PCMA-logo-1.png">
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#2563eb" />

  <link rel="stylesheet" href="style.css">
</head>
<body>
<header>
  <div class="header-container">
    <div class="brand">
      <img src="https://drive.google.com/thumbnail?id=1VanVX82ANGfKA8jcGZL8cVDQh4EuN8-r&sz=s800" alt="PCMA Logo" class="header-logo" decoding="async"/>
      <h2 class="header-title">PCMA Mobile V3.1</h2>
    </div>
    <button id="toggleFilters" class="filter-toggle-btn">Hide Search</button>
  </div>
</header>

<main>
  <div id="filters">
    <div class="top-actions">
      <button id="toggleMoreFilters">Filter</button>
    </div>
    <label class="filter-combo">
      <span class="input-icon-wrap">
        <input id="filterCombo" type="text" autocomplete="off" />
      </span>
    </label>
    <div id="moreFilters" class="hidden">
      <label>YEAR <select id="filterYear"><option value="">All</option></select></label>
      <label>PROJECT ENGINEER <select id="filterEngineer"><option value="">All</option></select></label>
      <label>CONTRACTOR <select id="filterContractor"><option value="">All</option></select></label>
      <label>STATUS <select id="filterStatus"><option value="">All</option></select></label>
      <button id="applyFilter">Apply</button>
      <button id="clearFilter">Clear</button>
    </div>
  </div>

  <div id="resultInfo" class="hidden"></div>
  <div id="grid" class="grid hidden"></div>
</main>

<!-- MODAL -->
<div id="modalBg" role="dialog" aria-modal="true" aria-labelledby="modalCID">
  <!-- floating arrows -->
  <button id="modalPrevFloat" class="modal-arrow" aria-label="Previous">
    <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="15 18 9 12 15 6"></polyline>
    </svg>
  </button>
  <button id="modalNextFloat" class="modal-arrow" aria-label="Next">
    <svg viewBox="0 0 24 24" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </button>

  <div id="modalBox">
    <div class="modal-top">
      <div class="modal-top-left">
        <img class="modal-top-logo" src="https://i.ibb.co/RRJpHk2/PCMA-logo-1.png" alt="PCMA" />
        <div id="modalCID" class="modal-top-cid">—</div>
      </div>
      <button id="closeModalTop" class="modal-close-btn">Close</button>
    </div>
    <div id="modalBody">
      <div id="modalContent"></div>
      <div id="modalButtons"></div>
      <div id="modalImages"></div>
    </div>
  </div>
</div>

<!-- GALLERY -->
<div id="galleryOverlay" class="gallery-overlay" role="dialog" aria-modal="true" aria-labelledby="galleryCID">
  <div class="gallery-box" id="galleryBox">
    <div class="gallery-top">
      <div class="gallery-title" id="galleryCID">—</div>
      <div class="gallery-actions">
        <a id="galleryOpen" class="gallery-btn" href="#" target="_blank" rel="noopener">Open</a>
        <button id="galleryClose" class="gallery-btn" aria-label="Close gallery">Close</button>
      </div>
    </div>
    <div class="gallery-main" id="galleryMain">
      <button class="nav-btn nav-prev" id="galleryPrev" aria-label="Previous image"><span>&lt;</span></button>
      <img id="galleryImg" class="gallery-img" alt="Gallery image"/>
      <button class="nav-btn nav-next" id="galleryNext" aria-label="Next image"><span>&gt;</span></button>
    </div>
    <div class="gallery-bottom">
      <div class="gallery-counter" id="galleryCounter">0 / 0</div>
      <div class="thumb-strip" id="galleryThumbs"></div>
    </div>
  </div>
</div>

<!-- PROJECTOR MODE -->
<div id="presentOverlay" class="present-overlay" aria-modal="true" role="dialog">
  <div class="present-box">
    <div class="present-top">
      <div id="presentCID" class="present-cid">—</div>
      <div class="present-actions">
        <button id="presentPlay" class="present-btn" title="Play/Pause">Play</button>
        <button id="presentOpen" class="present-btn" title="Open Current Image">Open</button>
        <button id="presentClose" class="present-btn" title="Close">Close</button>
      </div>
    </div>
    <div class="present-content">
      <div class="present-left">
        <button class="nav present-prev" aria-label="Prev" id="presentPrev">‹</button>
        <div id="presentSlides"></div>
        <div class="present-thumbs" id="presentThumbs"></div>
        <button class="nav present-next" aria-label="Next" id="presentNext">›</button>
      </div>
      <div class="present-right">
        <div class="present-grid">
          <div class="present-cell span-2"><div class="present-title">Project Name</div><div id="presentProj" class="present-value">—</div></div>
          <div class="present-cell span-2"><div class="present-title">Contractor</div><div id="presentContractor" class="present-value">—</div></div>
          <div class="present-cell"><div class="present-title">Contract Amount</div><div id="presentAmt" class="present-value">—</div></div>
          <div class="present-cell"><div class="present-title">Rev. Contract Amount</div><div id="presentRevAmt" class="present-value">—</div></div>
          <div class="present-cell span-2">
            <div class="present-title">NTP / Expiry / Rev.</div>
            <div class="present-grid-3">
              <div class="present-cell-small"><div class="present-title">NTP</div><div id="presentNTP" class="present-value">—</div></div>
              <div class="present-cell-small"><div class="present-title">Expiry</div><div id="presentExpiry" class="present-value">—</div></div>
              <div class="present-cell-small"><div class="present-title">Rev. Expiry</div><div id="presentRevExpiry" class="present-value">—</div></div>
            </div>
          </div>
          <div class="present-cell span-2">
            <div class="present-title">Schedule / Actual / Slippage</div>
            <div class="mini-bars">
              <div class="mini-row"><div class="mini-label">SCHED</div><div class="mini-bar"><div id="pMiniSched" class="mini-fill"></div></div></div>
              <div class="mini-row"><div class="mini-label">ACTUAL</div><div class="mini-bar"><div id="pMiniActual" class="mini-fill"></div></div></div>
              <div class="mini-row"><div class="mini-label">SLIPPAGE</div><div class="mini-bar"><div id="pMiniSlip" class="mini-fill"></div></div></div>
            </div>
          </div>
          <div class="present-cell span-2"><div class="present-title">Remarks</div><div id="presentRemarks" class="present-remarks">—</div></div>
          <div class="present-cell span-2"><div class="present-title">Status</div><div class="present-value"><span id="presentStatusChip" class="status-chip">—</span></div></div>
        </div>
      </div>
    </div>
    <div class="present-footer" style="display:flex;justify-content:space-between;">
      <div id="presentCounter">0 / 0</div>
      <div>Press ← / → to navigate • Esc to close</div>
    </div>
  </div>
</div>

  ...
  <!-- put these at the very end, before </body> -->
  <script src="search.js"></script>
  <script src="view-picture.js"></script>
  <script src="modal.js"></script>
  <script src="projector.js"></script>
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js").catch(console.error);
    }
  </script>
</body>
</html>

