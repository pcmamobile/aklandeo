/* ===== PCMA MODAL (namespaced, deduped) ===== */
:root {
  --pcma-accent: #f97316;
  --pcma-bg: #fff;
  --pcma-ink: #0f172a;
  --pcma-muted: #e5e7eb;
  --pcma-ring: rgba(0,0,0,.08);
}

/* BACKDROP / CONTAINER */
#pcmaModalBg{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.45);
  justify-content:center;
  align-items:center;
  z-index:5000;
}
#pcmaModalBg.pcma-show{display:flex;}

#pcmaModalBox{
  background:var(--pcma-bg);
  width:100vw; height:100vh;
  max-width:100vw; max-height:100vh;
  border-radius:0;
  display:flex; flex-direction:column;
  overflow:hidden;
  margin-top:8px;
}
@media (max-width:768px){ #pcmaModalBox{ margin-top:0; } }

/* HEADER */
.pcma-modal-top{
  position:sticky; top:0; z-index:5;
  display:flex; align-items:flex-end; justify-content:space-between; gap:10px;
  background:var(--pcma-accent); color:#fff;
  min-height:78px; padding:8px 14px 16px;
  border-bottom:1px solid var(--pcma-ring);
  box-shadow:0 2px 4px var(--pcma-ring);
}
.pcma-modal-top-left{ display:flex; align-items:flex-end; gap:10px; }
.pcma-modal-top-logo{ width:30px; height:30px; border-radius:6px; object-fit:cover; }
.pcma-modal-top-cid{ font-weight:900; color:#fff; line-height:1; }

.pcma-modal-close{
  background:#fff; border:none; color:var(--pcma-accent);
  font-weight:900; padding:6px 12px; border-radius:8px; cursor:pointer; line-height:1;
}
.pcma-modal-close:hover{ background:#ffe8d7; }

#pcmaModalBody{ flex:1 1 auto; overflow:auto; background:#fff; }
#pcmaModalContent{
  display:flex; flex-direction:column; gap:10px;
  padding:14px; max-width:1100px; margin:0 auto;
}
#pcmaModalButtons{
  padding:0 14px 14px; max-width:1100px; margin:0 auto;
  display:flex; flex-direction:column; gap:8px;
}
#pcmaModalButtons button{
  width:100%; padding:14px; border-radius:8px; font-size:1rem;
  border:none; cursor:pointer; font-weight:700;
}
#pcmaUploadBtn{ background:#007bff; color:#fff; }
#pcmaViewPictureBtn{ background:#16a34a; color:#fff; }
#pcmaPresentBtn{ background:#111827; color:#fff; }
#pcmaModalImages{ padding:0 14px 12px; max-width:1100px; margin:0 auto; }

/* FLOAT ARROWS */
.pcma-modal-arrow{
  position:fixed; top:50%; transform:translateY(-50%);
  background:rgba(0,0,0,0.2); backdrop-filter:blur(2px);
  border:none; width:48px; height:72px; border-radius:999px;
  display:flex; align-items:center; justify-content:center; cursor:pointer; z-index:5100;
}
#pcmaModalPrev{ left:10px; }
#pcmaModalNext{ right:10px; }
.pcma-modal-arrow svg{ width:26px; height:26px; stroke:#fff; }
@media (max-width:768px){ .pcma-modal-arrow{ width:40px; height:60px; } }

/* HERO IMAGE */
.pcma-hero{
  width:100%; border-radius:16px; overflow:hidden;
  background:#0f172a; border:1px solid rgba(15,23,42,.35); max-height:260px;
}
.pcma-hero img{ width:100%; height:260px; object-fit:cover; display:block; }

/* PRIMARY GRID */
.pcma-primary{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(240px, 1fr));
  gap:10px;
  background:linear-gradient(135deg, #eff6ff 50%, #dbeafe 50%, var(--pcma-accent) 80%);
  border:2px solid rgba(148,163,184,.35);
  border-radius:16px;
  box-shadow:0 8px 25px rgba(15,23,42,.12);
  padding:5px;
}
.pcma-primary-col{
  background:rgba(255,255,255,.45);
  border:1px solid rgba(255,255,255,.25);
  border-radius:12px;
  padding:8px 8px 6px;
  display:flex; flex-direction:column; gap:6px;
}
.pcma-primary-row{ display:flex; align-items:flex-start; gap:0; }
.pcma-primary-label{
  flex:0 0 120px; max-width:120px; font-size:.8rem; font-weight:600;
  color:var(--pcma-ink); white-space:nowrap;
}
.pcma-primary-value{
  flex:1; background:#fff; border-radius:10px; padding:3px 9px 4px;
  font-weight:600; font-size:.9rem; color:var(--pcma-ink);
  word-break:break-word; min-height:27px;
}
.pcma-primary-col.pcma-group-a .pcma-primary-label,
.pcma-primary-col.pcma-group-d .pcma-primary-label{ flex:0 0 92px; max-width:92px; }

/* STATUS (single source of truth) */
.pcma-primary-value.pcma-status{
  background:var(--pcma-accent); color:#fff;
  box-shadow:0 0 0 1px rgba(255,255,255,.25);
}

@media (max-width:600px){
  .pcma-primary{ grid-template-columns:1fr; }
  .pcma-primary-label{ flex:0 0 110px; max-width:110px; }
}

/* MINI BARS + PROGRESS */
.pcma-mini-bars{ display:flex; flex-direction:column; gap:6px; margin-top:10px; }
.pcma-mini-row{ display:flex; align-items:center; gap:10px; }
.pcma-mini-label{ width:82px; text-align:left; font-weight:900; color:var(--pcma-ink); letter-spacing:.2px; }
.pcma-mini-bar{ flex:1; height:18px; background:var(--pcma-muted); border-radius:999px; overflow:hidden; }
.pcma-mini-fill{
  height:100%; width:0%; display:flex; align-items:center; justify-content:center;
  font-size:.8rem; font-weight:800; color:#fff; transition:width 650ms ease-out;
  white-space:nowrap; padding:0 6px;
}

/* PROGRESS */
.pcma-progress{ margin-top:12px; }
.pcma-progress-label{ font-weight:800; color:var(--pcma-ink); margin-bottom:6px; font-size:1.05rem; text-align:center; }
.pcma-progress-bar{ width:100%; background:var(--pcma-muted); border-radius:12px; height:28px; overflow:hidden; position:relative; }
.pcma-progress-fill{
  height:100%; border-radius:12px; text-align:center; line-height:28px;
  font-weight:800; color:#fff; font-size:1rem; width:0%; transition:width 900ms ease-out;
  white-space:nowrap; padding:0 8px;
}

/* Page-level helper to prevent body scroll while modal is open */
.pcma-no-scroll{ overflow:hidden; }